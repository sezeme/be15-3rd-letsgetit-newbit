<script setup>
import {useRoute, useRouter} from 'vue-router'

const props = defineProps({
  profileImageUrl: {
    type: String,
    default: ''
  },
  nickname: {
    type: String,
    default: ''
  },
  jobName: {
    type: String,
    default: ''
  },
  isMyProfile: {
    type: Boolean,
    default: false
  },
  temperature: {
    type: Number,
    default: 0
  },
  price: {
    type: Number,
    default: 0
  },
  preferredTime: {
    type: String,
    default: ''
  },
  externalLinkUrl: {
    type: String,
    default: ''
  },
  introduction: {
    type: String,
    default: ''
  },
  isActive: {
    type: Boolean,
    default: ''
  }
})

const router = useRouter()
const route = useRoute()

function goToProfileEdit() {
  router.push('/mypage/profile/edit')
}


function requestCoffeeChat() {
  router.push(`/mentors/${route.params.id}/coffeechat-register`)
  console.log('ì»¤í”¼ì±— ì‹ ì²­í•˜ê¸°')
}
</script>

<template>
  <aside
      class="w-[406px] min-h-[960px] bg-[var(--newbitlight)] px-8 pt-10 pb-8 border-r border-[var(--newbitdivider)]"
  >
    <!-- ìƒë‹¨ -->
    <div class="flex flex-col items-center text-center mt-[42px]">
      <img
          :src="profileImageUrl"
          alt="í”„ë¡œí•„ ì´ë¯¸ì§€"
          class="w-[141px] h-[141px] rounded-full object-cover mb-[25px]"
      />

      <h2
          class="text-[color:var(--newbittext)] mb-[10px]"
          style="
          font-size: var(--newbit-text-heading1-font-size);
          font-weight: var(--newbit-text-heading1-font-weight);
          font-family: var(--newbit-text-heading1-font-family);
        "
      >
        {{ nickname }}
      </h2>

      <!-- ì§ë¬´ëª… + í™œë™ ìƒíƒœ -->
      <div class="flex items-center justify-center gap-x-2 mb-6">
        <p class="text-heading3 text-[color:var(--newbittext)]">
          {{ jobName }}
        </p>
        <p class="text-heading3 text-[color:var(--newbittext)] ms-20">
          {{ isActive ? 'í™œë™ ì¤‘' : 'ë¹„í™œì„±' }}
        </p>
      </div>

      <button
          v-if="isMyProfile"
          @click="goToProfileEdit"
          class="text-sm text-white bg-[var(--newbitnormal)] px-4 py-2 rounded"
      >
        í”„ë¡œí•„ ìˆ˜ì •
      </button>
      <button
          v-else
          @click="requestCoffeeChat"
          class="text-sm text-white bg-[var(--newbitnormal)] px-4 py-2 rounded"
      >
        ì»¤í”¼ì±— ì‹ ì²­
      </button>
    </div>

    <!-- ì •ë³´ ì¹´ë“œ -->
    <div class="mt-8 bg-white border border-blue-300 rounded-md p-4 space-y-4 break-words">
      <div>
        <p class="text-heading3 text-[var(--newbittext)]">ì˜¨ë„</p>
        <p class="text-16px-regular">{{ temperature }}â„ƒ</p>
      </div>
      <div>
        <p class="text-heading3 text-[var(--newbittext)]">ì»¤í”¼ì±— ê°€ê²©</p>
        <p class="text-16px-regular">{{ price }}ğŸ’ Â· 30ë¶„</p>
      </div>
      <div>
        <p class="text-heading3 text-[var(--newbittext)]">ì„ í˜¸ì‹œê°„</p>
        <p class="text-16px-regular whitespace-pre-line">{{ preferredTime }}</p>
      </div>
      <div>
        <p class="text-heading3 text-[var(--newbittext)]">ì™¸ë¶€ ë§í¬</p>
        <a
            v-if="externalLinkUrl"
            :href="externalLinkUrl"
            class="text-16px-regular text-blue-500 underline break-all"
            target="_blank"
            rel="noopener noreferrer"
        >
          {{ externalLinkUrl }}
        </a>
        <p v-else class="text-16px-regular text-[var(--newbitgray)]">ë§í¬ ì—†ìŒ</p>
      </div>
      <div>
        <p class="text-heading3 text-[var(--newbittext)]">ë©˜í†  ì†Œê°œ</p>
        <p class="text-16px-regular whitespace-pre-line">{{ introduction }}</p>
      </div>
    </div>
  </aside>
</template>
